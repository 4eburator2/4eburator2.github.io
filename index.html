<html>
    <!-- App redirect code -->    
    <head>        
        <!--<meta http-equiv="refresh" content="10;url=http://mobile.vzw.com/indycar"/>-->        
         
    </head>   
    
    <body style="background-color: #000000;">
    <script type="text/javascript">

    var deepLinkBase = "indycar://indy.vzw.com";
    var androidDeepLinkBase = "indycar://indy.vzw.com";   

    function launch_app_or_alt_url(el, custom, alt) {
      //var custom = "riot.guilds://check";
      //var alt = document.location + "&installed=false";
      var timer;
      var heartbeat;
      var iframe_timer;

      function clearTimers() {
        clearTimeout(timer);
        clearTimeout(heartbeat);
        clearTimeout(iframe_timer);
      }

      function intervalHeartbeat() {
        if (document.webkitHidden || document.hidden) {
          clearTimers();
        }
      }

      function tryIframeApproach() {
        var iframe = document.createElement("iframe");
        iframe.style.border = "none";
        iframe.style.width = "1px";
        iframe.style.height = "1px";
        iframe.onload = function () {
          document.location = alt;
        };
        iframe.src = custom;
        document.body.appendChild(iframe);
      }

      function tryWebkitApproach() {
        document.location = custom;
        timer = setTimeout(function () {
          document.location = alt;
        }, 2500);
      }
      tryWebkitApproach();
      /*heartbeat = setInterval(intervalHeartbeat, 200);
      if (navigator.userAgent.match(/Firefox/)) {
        tryWebkitApproach();
        iframe_timer = setTimeout(function () {
          tryIframeApproach();
        }, 1500);
      } else {
        tryIframeApproach();
      }*/
    }

    function launchiOSApp(deepLink) {            
        window.location.replace(deepLink);            
        !window.document.webkitHidden && setTimeout(function () {                                                        
                                            setTimeout(function () {                                                                   
                                                       window.location = itunesURL;                                                                   
                                                       }, 100);                                                        
                                            }, 600);
    }


    $(document).ready(function() {

        var url = window.location.href;                
        var index = url.lastIndexOf('/');  
        var params = url.substring(index);            
            
        if((navigator.userAgent.match(/Android/i)) || (navigator.userAgent.match(/Droid/i))) {
             launch_app_or_alt_url($(this), androidDeepLinkBase + params, "http://play.google.com/store/apps/details?id=com.vzw.indycar");
            //document.location = invite_url;
            event.preventDefault();
          // if(notInstalled) {
          //   $("#button-install-android-top").css("visibility", "hidden");
          //   $("#invite-text-extra-android-installed").hide();
          //   $("#invite-button-android").hide();
          // }
          // else {
          //   $("#invite-text-extra-android-not-installed").hide();
          //   $("#button-install-android-middle").hide();
          // }
          // $("#button-install-android-top, #button-install-android-middle").click(function() {
          //   document.location = "http://play.google.com/store/apps/details?id=com.vzw.indycar";
          // });
          // $("#android-wrap").show();
          // $("#invite-button-android").click(function() {
          //   launch_app_or_alt_url($(this), androidDeepLinkBase + params, "http://play.google.com/store/apps/details?id=com.vzw.indycar");
          //   //document.location = invite_url;
          //   event.preventDefault();
          // });
        }
        else if((navigator.userAgent.match(/iPhone;/i)) || (navigator.userAgent.match(/iPad;/i))) {
            launchiOSApp(deepLinkBase + params);
          // if(notInstalled) {
          //   $("#button-install-ios-top").css("visibility", "hidden");
          //   $("#invite-text-extra-ios-installed").hide();
          //   $("#invite-button-ios").hide();
          // }
          // else {
          //   $("#invite-text-extra-ios-not-installed").hide();
          //   $("#button-install-ios").hide();
          // }

          // $("#university-text-mobile").css({
          //   "margin-top": "30%"
          // });
          // $("#ios-wrap").show();
          // $("#invite-button-ios").click(function() {
          //   var oldLocation = document.location;
          //   if(!notInstalled) {
          //     document.location = invite_url;
          //     setTimeout(function() {
          //       document.location = oldLocation + "?notinstalled";
          //     }, 300);
          //   }
          // });
          // $("#button-install-ios, #button-install-ios-top").click(function() {
          //   document.location = "https://itunes.apple.com/us/app/studenceskie-gil-dii-dla-league/id939730353?l=ru&ls=1&mt=8";
          // });
        } else {
          window.location = noAppURL; 
        }
      

    });





            // var deepLinkBase = "indycar://indy.vzw.com";
            // var androidDeepLinkBase = "http://indy.vzw.com";            
            // var noAppURL = "http://mobile.vzw.com/indycar";            
            // var marketURL = "http://play.google.com/store/apps/details?id=com.vzw.indycar";            
            // var itunesURL = "itms-apps://itunes.apple.com/app/id606905722";            
            // var timeout = 5000;            
            // var marketTimeout = 1000;            
            // var changeLocation = true;     
            
            // document.onfocusin = function() {changeLocation = true};            
            // document.onfocusout = function() {changeLocation = false};

            // function launchAndroidApp(deepLink) {       
            //     window.onerror=function() {                    
            //         alert('Scheme registration not detected');                    
            //         window.location = marketURL;                    
            //     }                
            //     timer = setTimeout(function() {                                   
            //                         if (changeLocation) {                                   
            //                             window.location = marketURL;                                   
            //                         }                                   
            //                         },marketTimeout);
                                   
            //                         document.write('<iframe style="display:none" height="0" width="0" id="loader"></iframe>');
            //                         document.getElementById('loader').src = deepLink;
                                   
            // }

            // function launchiOSApp(deepLink) {            
            //     window.location.replace(deepLink);            
            //     !window.document.webkitHidden && setTimeout(function () {                                                        
            //                                                 setTimeout(function () {                                                                   
            //                                                            window.location = itunesURL;                                                                   
            //                                                            }, 100);                                                        
            //                                                 }, 600);
            // }           
            
            // function timeoutAppLaunch() {                
            //     // hang around for 5 seconds before launching                
            //     setTimeout("launchApp()",timeout);                
            // }           
            
            // function launchApp() {                
            //     // Derive c parameter (e.g. c=12345) from header and pass to subfunction                
            //     //e.g. c=12345;           

            //     var url = window.location.href;                
            //     var index = url.lastIndexOf('/');  
            //     var params = url.substring(index);            
            //     if (index >= 0 && index < url.length) {            
            //         if ( (navigator.userAgent.match(/iPhone;/i)) || (navigator.userAgent.match(/iPad;/i)) ) {                        
            //             launchiOSApp(deepLinkBase + params);                        
            //             return;                        
            //         } else if ( (navigator.userAgent.match(/Android/i)) || (navigator.userAgent.match(/Droid/i)) ) {                        
            //             launchAndroidApp(androidDeepLinkBase + params);                        
            //             return;                        
            //         }                    
            //     }
                
            //     window.location = noAppURL;                
            // }        
            </script>           
        <noscript>Javascript must be enabled to Redirect to INDYCAR 13.</noscript>        
    </body>
    
</html>
